apiVersion: admissionregistration.k8s.io/v1beta1
kind: ValidatingWebhookConfiguration
metadata:
  name: "{{{ COMPOSITE_CONTROLLER_NAME }}}"
webhooks:
  - name: "{{{ COMPOSITE_CONTROLLER_NAME }}}.check.webhook"
    failurePolicy: Fail
    sideEffects: None
    rules:
      - apiGroups:
          - zalando.org
        apiVersions:
          - "*"
        operations:
          - CREATE
          - UPDATE
        resources:
          - "{{{ CRD_PLURAL }}}"
    clientConfig:
      service:
        namespace: fabric
        name: "{{{ COMPOSITE_CONTROLLER_NAME }}}"
        path: "/validate"
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUUvRENDQXVTZ0F3SUJBZ0lFSUVJenFUQU5CZ2txaGtpRzl3MEJBUXdGQURCck1Rc3dDUVlEVlFRR0V3SkoNClJURVBNQTBHQTFVRUNCTUdSSFZpYkdsdU1ROHdEUVlEVlFRSEV3WkVkV0pzYVc0eEVEQU9CZ05WQkFvVEIxcGgNCmJHRnVaRzh4RnpBVkJnTlZCQXNURGtsdVpuSmhjM1J5ZFdOMGRYSmxNUTh3RFFZRFZRUURFd1pHWVdKeWFXTXcNCkhoY05NakV3TWpFM01UWTFPVEEzV2hjTk5EZ3dOekEwTVRZMU9UQTNXakI5TVFzd0NRWURWUVFHRXdKSlJURVANCk1BMEdBMVVFQ0JNR1JIVmliR2x1TVE4d0RRWURWUVFIRXdaRWRXSnNhVzR4RURBT0JnTlZCQW9UQjFwaGJHRnUNClpHOHhEekFOQmdOVkJBc1RCa1poWW5KcFl6RXBNQ2NHQTFVRUF4TWdkR1Z6ZEMxbllYUmxkMkY1TFc5d1pYSmgNCmRHOXlMbVpoWW5KcFl5NXpkbU13Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ3kNCkcvUldKSzhhSDY2ZjFWZVlPK3FHdnpIbDhKOTdxK3lzc3pqcWQ5ZGR3dDFsV1k4dVhsTEs5WkF2NnNBUVlJcXMNCnRTUENDQWV6eG1PZFUyYXR6bmNGTmtSZTJoNmJtN3J2VkVOY0NVRXltUEdWTXJrL0J4MEdzSi9MNFhMMEZJQUINCko0Smdqcjh1RUhZMkpYZjhzMVdSOFM4UmRFWTF0KzZPdmVmNG8zeG9hVWFXVElRaGV3MFYxUkVhUDJpN3ZXbm8NCjE2TFc0ZXFncURSYVBSVk1vSVhydjExT2x3UG1jeWdjS1ZkcHl2RjB6Z0VJNTRjZVVGS2ttVnphemVaZ0ZxQUgNCldxUkVCVVc2WHRXTUVMTnhVS0QycDBoQ0NybmNIVkNsbkYvemF4Qmg0OExVVzFtMWRKdDRESFpZMk4zNHYrR1UNCnhmUHMvd2tGd2N3RU1kMkZBWU1sQWdNQkFBR2pnWlV3Z1pJd0hRWURWUjBPQkJZRUZENzRUTkc1UmdVZnNzTUoNCjJnYmRNYWh5VTZrSk1BNEdBMVVkRHdFQi93UUVBd0lGb0RBckJnTlZIUkVFSkRBaWdpQjBaWE4wTFdkaGRHVjMNCllYa3RiM0JsY21GMGIzSXVabUZpY21sakxuTjJZekFmQmdOVkhTTUVHREFXZ0JSSHNYSzRYTjZkYW96MHhDZmMNCjlQei9XK1VsSGpBVEJnTlZIU1VFRERBS0JnZ3JCZ0VGQlFjREFUQU5CZ2txaGtpRzl3MEJBUXdGQUFPQ0FnRUENCmQrLzRPUGZXNm12K3l6Y1VxT1hKZExIWnF1RXlYZEovWXZ3SGU4RlRabFBhekpkVXJBQUtFdmR1WVBOMmJpQ2INCmREK0p2Sk0rZnMrY28vSzdaYk8rYUthZUZ0UzYraUI3TUhtZm5Ed1p2QlR3WlJVQ0lIZG0ydnhBMG4yWlhFSXkNCnpXbVFocGJBcit2cTViOVpNalBuTUJYc3Viek43aGh0dS9Kc3A4VGtRSkNuSVh6alllZHhsMjlWalRNYzJmRFINCnBjalQ4eU5XSXFRZGZFVGhjbSs4aFA4bUxLRXhaakNiNFRnQ3lJRWtlQ1NQbHYwdHZVckt0SnAwRmp6bHhTUm8NCmpMdFh1cTBSLzNGV1pGaDN6UGdtWWFnYlFyaGpCMmdwdTB4SmQrdzRlMkNSWlIyWFd6K25qRHFzKytqaGc0Uk0NCmZOYklYSnordlBvclZGdzN4QnQrRmdHekdzTVd1YUIxR083OU15SWZPZUVydmRQVGh2ejI0MkNpY21RVnVqdWsNCkJLUXEwSzhnQ1kwWGVOVVp1bm8vdlBEZ3BkYTV5ZWlLNzBMWkF6M051c3NnRVRXamxqczFPL2hLRmdaZjlVUjINClUrbkJYR1psc0d6Tkgwb0RlRlNMODRSZWExbE5TSXAybzNkTjlLNkZCQnB5YUFNQ2lVYzVESUd3NDJ0Njg4ZnkNCmg5dm1GTXJ2UmZrUG5IbThkWW0rK2NXTEJKeXJxekJyNVo0NTRoM0lYbFJIZGNWdFJBc09xTnUva1B1VEZNRloNCjVLUWUwbjFxSFdQQWxrSDk5M1BzRTVXM0licDNXbU9jQUFVdWh6ZXBjQmloYWRVQ3NkOFJlNHIrRmNTa1h2REoNCnJIa2FiRmxPY1hodjBGY0RHV3J3NDhwK3JPTFVyNnltOTYxWENaWnA3WWs9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
