apiVersion: admissionregistration.k8s.io/v1beta1
kind: ValidatingWebhookConfiguration
metadata:
  name: "{{{ COMPOSITE_CONTROLLER_NAME }}}"
webhooks:
  - name: "{{{ COMPOSITE_CONTROLLER_NAME }}}.check.webhook"
    failurePolicy: Fail
    sideEffects: None
    rules:
      - apiGroups:
          - zalando.org
        apiVersions:
          - "*"
        operations:
          - CREATE
          - UPDATE
        resources:
          - "{{{ CRD_PLURAL }}}"
    clientConfig:
      service:
        namespace: fabric
        name: "{{{ COMPOSITE_CONTROLLER_NAME }}}"
        path: "/validate"
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUV6VENDQXJXZ0F3SUJBZ0lFTFZRWGV6QU5CZ2txaGtpRzl3MEJBUXdGQURCck1Rc3dDUVlEVlFRR0V3SkoNClJURVBNQTBHQTFVRUNCTUdSSFZpYkdsdU1ROHdEUVlEVlFRSEV3WkVkV0pzYVc0eEVEQU9CZ05WQkFvVEIxcGgNCmJHRnVaRzh4RnpBVkJnTlZCQXNURGtsdVpuSmhjM1J5ZFdOMGRYSmxNUTh3RFFZRFZRUURFd1pHWVdKeWFXTXcNCkhoY05NakV3TWpFM01UWTBPVFE1V2hjTk5EZ3dOekEwTVRZME9UUTVXakI5TVFzd0NRWURWUVFHRXdKSlJURVANCk1BMEdBMVVFQ0JNR1JIVmliR2x1TVE4d0RRWURWUVFIRXdaRWRXSnNhVzR4RURBT0JnTlZCQW9UQjFwaGJHRnUNClpHOHhEekFOQmdOVkJBc1RCa1poWW5KcFl6RXBNQ2NHQTFVRUF4TWdkR1Z6ZEMxbllYUmxkMkY1TFc5d1pYSmgNCmRHOXlMbVpoWW5KcFl5NXpkbU13Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ1cNCnNaMnhxWjM5eGpwUng1YVM2SmxvQnovMUNhaEJTQ0Z6UDFkaHFxZ3UzMEh0SHJmU04wK1luTFpXNXExQTA0dWwNClJpeDl4NENtUE4wd2lUcTY2aUd0bktxYTg3U1o1UXp1VmlLS0dVZFlZeUIwSkJyeElyQ2ExMm9jQ3I2R1U0SEMNClN4VXpGSFFXRlBQcHRna1JlTE1keDFFMTd4RFU1MEJYbktUbGlsNnNWNjdtQWNGaVA5bExjQXY1SEpyS2NHMVgNCnY5bGNpem0xKytrMTVaY0ZiOGZGSmx4ZjU2Ty9CTkl3MUdmRE1GQmpoVURmY0cvc050cUJpNzEzcnpyUVBoWngNCmZQalAvVmdrT0Nvb2tyeVQ4VVZ1d2k4NkhFZTU0REcwWFk2QzFVZ3MwS0ZyRVJzWEQzVGpzZ3FvYnlzYm1vRXINCmVNVjc0SmI2N2lTR2JPbUJycnZ0QWdNQkFBR2paekJsTUIwR0ExVWREZ1FXQkJSU3ZnRFVoY3laQXJjNHZ6MFoNCmJnZjNibUVOQURBT0JnTlZIUThCQWY4RUJBTUNCYUF3SHdZRFZSMGpCQmd3Rm9BVTRnTjlvK2xaM3BuVjNhcVQNCjFqYVUyS25rWHZnd0V3WURWUjBsQkF3d0NnWUlLd1lCQlFVSEF3RXdEUVlKS29aSWh2Y05BUUVNQlFBRGdnSUINCkFFU1dNRzFLU2NidFN5MXJUTmxqMldUNnVjU0xwbDFmTGx3YVAxdXp6bkVsbzVpNVJxVm5md1dWMUNiREgxbTQNCk1uUU1BMFZDK2l6RzhaWlRXQWErMGsyTG9ydGp4bjF2RzQ2T2lmRzQvWlFUVU4rUzI2WVRwMEZMaXZPOUV2VXANCmIzRUVtaDVDZnBpUmg3bTdBaWpJTG1hcTllSENSL3RYQ2prZHFpeXA0SnNLR2F2QnFjRmJzREI0dzNNM1lrbHoNCkkzaE9iUS9BS0ZIdjMxZHNaMlkxdW1FZ3ducUhmb3NZV09EeVc1Y0twRW5wSUQ3NUs4RWtMTHJzZDhaUTIrUVINCjlNWW9RQ29KU015enp4T1ZTcHZRZDNZL3pOMzJlZUYxRG1VbVNTWjBaOWErVXhPRi9lRmszYTJEeE1XYUx1alYNCllZdjNvbXZQMEYxREJja2g4T0NqSkFmL1NqdmR6Tm11SU8wZ0NIMW9qcXQ3QlFGZ1psNkFjellsbGtxTXZLMFcNClVpQUNlMzFadlp2TFl4bjVzVFRDRjg0dmE0QmVZRlJvM3NISzdXZ0hvTlN6N0pwVE5idFlKdEZjKzQ2eUNFcTkNCm43SzBiVjVmSzhSOG5wSFdrYW56U3RRZ1owV0tMKzk3YkkrQnVvYWlpR3kxa0lIbFlHdW9ZNE1tV3drR0hLKzANClJ3eE1WNElHdGNzUWplT2d6TmV3V1dkMHpBYU54U2xtQU5JbkR4WUQ2d3Y2Q01JbWUyVkdvYkptNmlDb2VFYUQNCnhlb3JiWjJyaFZKUlRicGhsa3ZZZjBaTFVCUFljMk5SV1RXRktrWHB6V1lLN29GQUU1RTdsakhJMlFpYUhaVDANCkNMVnlCRkNOclZQeXc4a05NSWRJdEQxWjdmcnJ5eEpRemszR21yS0JOSHVrCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
