apiVersion: admissionregistration.k8s.io/v1beta1
kind: ValidatingWebhookConfiguration
metadata:
  name: "{{{ COMPOSITE_CONTROLLER_NAME }}}"
webhooks:
  - name: "{{{ COMPOSITE_CONTROLLER_NAME }}}.check.webhook"
    failurePolicy: Fail
    sideEffects: None
    rules:
      - apiGroups:
          - zalando.org
        apiVersions:
          - "*"
        operations:
          - CREATE
          - UPDATE
        resources:
          - "{{{ CRD_PLURAL }}}"
    clientConfig:
      service:
        namespace: fabric
        name: "{{{ COMPOSITE_CONTROLLER_NAME }}}"
        path: "/validate"
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVrVENDQW5tZ0F3SUJBZ0lFQml1aDlUQU5CZ2txaGtpRzl3MEJBUXdGQURCYU1Rc3dDUVlEVlFRR0V3SkoNClJURVBNQTBHQTFVRUNCTUdSSFZpYkdsdU1ROHdEUVlEVlFRSEV3WkVkV0pzYVc0eEVEQU9CZ05WQkFvVEIxcGgNCmJHRnVaRzh4RnpBVkJnTlZCQXNURGtsdVpuSmhjM1J5ZFdOMGRYSmxNQjRYRFRJeE1ESXhOekUyTXpNMU1sb1gNCkRUUTRNRGN3TkRFMk16TTFNbG93VWpFTE1Ba0dBMVVFQmhNQ1NVVXhEekFOQmdOVkJBZ1RCa1IxWW14cGJqRVANCk1BMEdBMVVFQnhNR1JIVmliR2x1TVJBd0RnWURWUVFLRXdkYVlXeGhibVJ2TVE4d0RRWURWUVFMRXdaR1lXSnkNCmFXTXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFDY05ZQWNxNkdzcXJIZTRaWEENCkkzbk9GTmM1Wm5IVUFqQjYxeS9oVVFYUXZFemtPa3prZ3J4NzFreGFBQ1Arak1BdVN4bmxBTm5kSlhVNjNWOUoNCkM5QVM0NmZyNzRIanlQSDlKMHdzOHVJNXZHK280SVJzdTNFWWUwSmJ2TGh2WWRnR25sWC8vSEVPVk0xdlphS0MNCmJ5LzZsT1Z1d01yYU1BMjlhMlRWcjJ6VFlkVWNNSmQ3MFk0VFpKdlF2N3g3T0dwdGw0RVdkalJyRlQzdzRJL3UNCllHVWxYanNFNXMzVE5iUlZLZUs3aUhTbFQ2UXFIYy9HRytsYTZyaUlDZ2JLc3drSTFOVU02eVI3c2dncWJ0U0wNCmVCQVd5RkVtZk11d2czRjBUZzh2VXgvbzR0ZEFORHFIVVpiZDdqVDhQUEJoLzcxMEZBTEd6V2s1K2I0c0xuUlgNCmREdWhBZ01CQUFHalp6QmxNQjBHQTFVZERnUVdCQlNNRksxalA5RVZ6bk5QVGdMWmQwWlVUeFZjUkRBT0JnTlYNCkhROEJBZjhFQkFNQ0JhQXdId1lEVlIwakJCZ3dGb0FVdGhUSjgwL0ZQZDUweklKSlhZb3gxSFVZQXhFd0V3WUQNClZSMGxCQXd3Q2dZSUt3WUJCUVVIQXdFd0RRWUpLb1pJaHZjTkFRRU1CUUFEZ2dJQkFIcEt4TTRDWDJrWk9rY3MNClhtcEw1WE5lWVRQbXJBL1VCemNVMkpTTGgyR2RxTWJIemlQYWR1dGM3a3E0cU11VGV1ejVmMWJrdVhURFNFYksNCk50ZGJDY2VKaGRiSTk3eFkyV012VkRlY1FLVlVoelBTVU04ZjJyaS96RStzRnRvOGlmQzlBVTdLUDhEMUlSZjYNCkhWcG1JdGhCK0xDcWo2ZUE1ZkxqWW1DSzdZVGlOeDFVY3luTnc3RTRrR0lZN1pxSTBYVzdGV1luMkNaL2MyaHoNCm1IYU9qQWwyQjBVV0FYSVBHdW1JcHFFeEVCUWNUWmZtWmVlY09lUmo4VmhocVUxK0ZucEpwb2JTZmF1ZWFMck8NClBIMEhKYjRGVVJmNDFTV3Rqbk1rMlJtNkZYZ2pxb1pVKzl5WUdKYTIrZU0yR1VRbGZZU2QvcUFqekIwTkU3TGMNCngvYlNXYzJ2aVlhc0dPN3U5ZjNWOXZ3TVhHdmVVRXpqL2JPQkhsUGMwWDdtVW9wRFNVdEc3K2ZjcGl4WlljbzYNCkVWVmxRbGdrZVExQ21WWFUvWE83ZGpFb3g3SWJXQ0lEbG9ORUJiZng2eWNsQ0VwaTRjaitZUUNLMmxUOXBqY3QNCkF0YVZQQk5ZZ3RIVjdxS3ZuaGRhYjl1UVgxbkh3VGJsNFpqSjc2clBIcXNkcG40N0hzTjl2SU5Dc1RFNllpaUQNCmpUcUJHR05BOG5oOVorUVZrbW9Obk0yN3czcDBkMys2Q1g5cmpMakRVeEwzNkZKY2Z5ZVBaV3BHcUlTUWRHYXANCjhXeGYrcDNFd0NZZUtoWS9GSVRWYnNzdFdNMTZJNkFERmZQNlhibG1wZi9wTmV1cGFUeTg0ZzM0QmF2c1h0WHkNCnVkL2orc2tyaEY2cGRDVFI0TEUyRWZURE5Rd1oKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
